<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <!-- iPhone -->
    <link href="images/startup-image-320x460.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
    <!-- iPhone (Retina) -->
    <link href="images/startup-image-640x920.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <!-- iPhone 5 -->
    <link href="images/startup-image-640x1096.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <title>Flight</title>
    <link rel="stylesheet" href="../lib/flight.css">
    <link rel="stylesheet" href="../lib/flight.theme.css">
  </head>

  <body>
    <div id="debug"></div>
    <div class="header-bg"></div>

    <div id="index" class="page hidden">
      <header>
        <h1>Glide.js</h1>
      </header>
      <div class="scrollview">
        <div class="scrollview-inner">
          <div class="scrollview-content">
            <ul class="list menu">
              <li><a href="#animations">Animations</a></li>
              <li><a href="#contacts">Contacts demo app</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="animations" class="page hidden">
      <header>
        <a class="back left btn"><button class="secondary">Back</button></a>
        <h1>Animations</h1>
      </header>
      <div class="scrollview">
        <div class="scrollview-inner">
          <div class="scrollview-content">
            <ul class="list menu">
              <li><a href="#slide">Slide</a></li>
              <li><a href="#slideUp">Slide up</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="slide" class="page hidden">
      <header>
        <a class="back left btn"><button class="secondary">Back</button></a>
        <h1>Slide</h1>
      </header>
      <div class="scrollview">
        <div class="scrollview-inner">
          <div class="scrollview-content">
            <p>Slide is the default transition between pages.</p>
          </div>
        </div>
      </div>
    </div>

    <div id="slideUp" class="page hidden" data-transition="slideUp">
      <header>
        <a class="back left btn"><button class="secondary">Back</button></a>
        <h1>Slide Up</h1>
      </header>
      <div class="scrollview">
        <div class="scrollview-inner">
          <div class="scrollview-content">
            <p>To apply slide up add <code>data-transition="slideUp"</code> to the parent element of your page</p>
          </div>
        </div>
      </div>
    </div>

    <div id="add-contact-form" class="page hidden">
      <header>
        <a class="back left btn">
            <button class="secondary">Cancel</button>
        </a>
        <h1>Test</h1>
      </header>
      <div class="scrollview">
        <div class="scrollview-inner">
          <div class="scrollview-content">
            <form>
              <li>
                <input type="text" placeholder="Firstname" />
              </li>
              <li>
                <input type="text" placeholder="Last name" />
              </li>
              <li>
                <input type="text" placeholder="Job title" />
              </li>
              <li>
                <input type="text" placeholder="Orgranisation" />
              </li>
              <li>
                <input type="text" placeholder="Email address" />
              </li>
              <li>
                <input type="number" placeholder="Phone number" />
              </li>
              <li>
                <textarea type="textarea" placeholder="Address"></textarea>
              </li>
              <li>
                <label>Address</label>
                <select>
                  <option>Home</option>
                  <option>Work</option>
                </select>
              </li>
              <li>
                <textarea type="textarea" placeholder="About"></textarea>
              </li>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div id="contacts" class="page hidden">
      <header>
        <a class="back left btn">
            <button class="secondary">Back</button>
        </a>
        <h1>Contacts</h1>
      </header>
       <div class="scrollview">
        <div class="scrollview-inner">
          <div class="scrollview-content">
            <ul id="contacts-list" class="list">
              <!-- #contact-list-item -->
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script type="text/html" id="contact-list-item">
       <li><a href="#contacts/<%= id %>"><img src="http://placehold.it/50/50" /><%= name %></a></li>
    </script>

    <script src="vendor/jquery.js"></script>
    <script src="vendor/underscore.js"></script>
    <script src="vendor/backbone.js"></script>
    <script src="vendor/fastClick.js"></script>

    <script src="vendor/iscroll-lite.js"></script>

    <script src="../lib/flight.js"></script>

    <script src="app/application.js"></script>
    <script src="app/routers.js"></script>
    <script src="app/models.js"></script>
    <script src="app/collections.js"></script>
    <script src="app/views.js"></script>

    <script type="text/javascript">
      $(function() {
        app.init();

        // disable touch move on header to prevent user stretching from top
        header = document.querySelector('header')
        header.addEventListener('touchmove', function(e) {
          e.preventDefault();
        });

        $('.back').on('click', function() {
          window.history.back()
        });

        $(document).on('click', 'header h1', function() {
          $('.scrollview-inner').animate({ scrollTop: '0px' })
        })

        if (window.Touch) {
          new FastClick(document.body);
        }

         // need to move this into flight
        if (navigator.standalone) {
          window.preventScrolling = true
          $(document)
          .on('touchstart','.scrollview-content', function() {
            this.style.minHeight = (this.parentNode.offsetHeight+2)+'px'
            window.preventScrolling=false
          })
          .on('touchmove', '.scrollview-content', function(e) {
            if (window.preventScrolling) e.preventDefault()
          })
          .on('touchend', '.scrollview-content', function() {
            window.preventScrolling = true
          })
        } else {
          $(document)
          .on('touchstart', '.scrollview-content', function() {
          this.style.minHeight = (this.parentNode.offsetHeight+2)+'px'
          })
        }


      });
    </script>

  </body>
</html>
