<?xml version="1.0"?>
<project basedir=".">

    <target name="build-flight" depends="-mobile-stylesheets, -mobile-coffee" />
    
    <target name="-mobile-coffee">
        <apply executable="coffee" dest="${basedir}/js" verbose="true" failonerror="true">
            <arg value="-c"/>
            <srcfile />

            <fileset dir="${basedir}/js" includes="**/*.coffee" excludes="**/_*" />
            <firstmatchmapper>
                <globmapper from="*.coffee" to="*.js" />
            </firstmatchmapper>
        </apply>
    </target>

    <target name="-mobile-stylesheets">
        <apply executable="lessc" dest="${basedir}/css" verbose="true" failonerror="true" force="true">
            <arg line="-x"/>
            <srcfile />
            <targetfile />

            <fileset dir="${basedir}/css" includes="**/*.less" excludes="**/_*" />
            <firstmatchmapper>
                <globmapper from="*.less" to="*.css" />
            </firstmatchmapper>
        </apply>
    </target>
</project>